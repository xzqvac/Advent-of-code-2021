#include <iostream>
#include <fstream>
#include <vector>
#include <sstream>
#include <map>
#include <algorithm>
#include <utility>

using namespace std;

struct Point
{
    int x;
    int y;
};

bool operator<(const Point& p1, const Point& p2)
{
    return p1.x < p2.x || (p1.x == p2.x && p1.y < p2.y);
}
std::ostream& operator<<(std::ostream& os, const Point& p)
{
    os << "(" << p.x << "," << p.y << ")";
    return os;
}


int main() {
    ios_base::sync_with_stdio(false);

    fstream inFile;
    string line;
    string filename = "input.txt";
    inFile.open(filename);

    if (!inFile.is_open())
    {
        cout << "File doesn't exists" << '\n';
    }


    string sx1, sy1, sx2, sy2;
    int x1 = 0, x2 = 0, y1 = 0, y2 = 0, direction = 0;
    map<Point, int> counts;
    while(getline(inFile, line))
    {
        stringstream stringToInt(line);
        getline(stringToInt, sx1, ',');
        getline(stringToInt, sy1, ' ');
        getline(stringToInt, sx2, '-');
        getline(stringToInt, sx2, '>');
        getline(stringToInt, sx2, ' ');
        getline(stringToInt, sx2, ',');
        getline(stringToInt, sy2, ',');
        x1 = stoi(sx1);
        y1 = stoi(sy1);
        x2 = stoi(sx2);
        y2 = stoi(sy2);


        if(x1 == x2)
        {
            if(y1 > y2)
            {
                swap(y1, y2);
            }
            for(int y = y1; y <= y2; y++)
            {
                Point p{x1, y};
                auto it = counts.find(p);
                if(it != counts.end())
                    it->second++;
                else
                    counts[p] = 1;
            }
        }

        else if(y1 == y2)
        {
            if(x1 > x2)
                swap(x1, x2);
            for(int x = x1; x <= x2; x++)
            {
                Point p{x, y1};
                auto it = counts.find(p);
                if(it != counts.end())
                    it->second++;
                else
                    counts[p] = 1;
            }
        }
            int c = std::count_if(counts.begin(), counts.end(),
                          [](auto&& p) {
                              return p.second >= 2;
                          });
    std::cout << c << std::endl;

    return 0;
}
